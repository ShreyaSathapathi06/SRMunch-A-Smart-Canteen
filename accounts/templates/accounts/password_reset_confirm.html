{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Set New Password | SRMunch</title>
    <link rel="stylesheet" href="{% static 'canteen/menu.css' %}">
</head>

<body style="background:#0f1b33; font-family:'Segoe UI', sans-serif;">

<div style="min-height:100vh; display:flex; justify-content:center; align-items:center;">
    <div style="
        background:#132440;
        color:white;
        padding:40px;
        width:420px;
        border-radius:14px;
        box-shadow:0 0 18px rgba(0,0,0,0.45);
        display:flex;
        flex-direction:column;
        align-items:center;
    ">

        <img src="{% static 'canteen/logo.png' %}" style="width:200px; margin-bottom:10px;">

        <h1 style="color:#ff9f1c; font-size:42px; margin-bottom:0;">SRMunch</h1>
        <p style="color:#00e5ff; margin-bottom:20px;">Set New Password</p>

        <!-- BACKEND ERROR BOX -->
        {% if form.errors %}
        <div id="serverError" style="
            background:#ffb3b3;
            color:#700;
            padding:10px;
            border-radius:6px;
            margin-bottom:15px;
            text-align:center;
            width:100%;
        ">
            {% for field in form %}
                {% for error in field.errors %}
                    {{ error }}<br>
                {% endfor %}
            {% endfor %}
        </div>
        {% endif %}

        <form method="post" style="width:100%;">
            {% csrf_token %}

            <!-- NEW PASSWORD -->
            <div style="margin-bottom:16px;">
                <label style="color:#ff9f1c;">New Password</label>
                <input type="password" name="new_password1" required
                       style="width:100%; padding:14px 12px; border-radius:8px; border:none;
                              background:#fdf6f0; color:#132440; box-sizing:border-box;">
            </div>

            <!-- CONFIRM PASSWORD -->
            <div style="margin-bottom:22px;">
                <label style="color:#ff9f1c;">Confirm Password</label>
                <input type="password" name="new_password2" required
                       style="width:100%; padding:14px 12px; border-radius:8px; border:none;
                              background:#fdf6f0; color:#132440; box-sizing:border-box;">
            </div>

            <button type="submit" style="
                width:100%;
                padding:14px;
                background:#00e5ff;
                border:none;
                border-radius:10px;
                font-weight:bold;
                cursor:pointer;
            ">
                Set Password
            </button>
        </form>

    </div>
</div>

<script>
const serverError = document.getElementById("serverError");
const inputs = document.querySelectorAll("input");

inputs.forEach(input => {
    input.addEventListener("input", () => {
        if (serverError) serverError.style.display = "none";
    });
});

if (serverError && serverError.textContent.trim() !== "") {
    setTimeout(() => {
        serverError.style.display = "none";
    }, 2000);
}
</script>

</body>
</html>
